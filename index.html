
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wealth By Brainslap</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Wealth by Brainslap" />
  <link rel="icon" href="favicon.png">
  <meta property="og:title" content="" />
  <meta property="og:description" content="Wealth by Brainslap" />
  <meta property="og:image" content="" />
  <meta name="twitter:card" content="" />
  <meta name="twitter:site" content="" />
  <meta name="twitter:title" content="" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="" />
  <link rel="manifest" href="manifest.webmanifest">


<link href="https://cdn.jsdelivr.net/gh/tofsjonas/sortable@latest/sortable.min.css" rel="stylesheet" />


</head>

<body>
<h1>Wealth</h1> by Brainslap!
<hr>


<input type="date" id="from_date" name="from_date">
<input type="date" id="to_date" name="to_date">
<br>
<br>
<input type="submit" onclick="all_stocks(stocks);">
<br>
<br>

<!-- <input type="button" text="Sort Table" onclick="table_sort();"> -->


<!-- <div id="result">
</div> -->

<table class='sortable'>
  <thead>
    <tr>
      <th>Stock</th>
      <th>Pattern</th>
      <th>Overall Return</th>
      <th>Max return in last x weeks</th>
      <th>Max return was</th>
      <th>Min return in last x weeks</th>
      <th>Min return was</th>
      <th>Buy Metric</th>
    </tr>
  </thead>
  <tbody id='result'>

  </tbody>
</table>





<script>

function min_max_return(arr) {
  var price = arr;
  var base = price[price.length - 1];
  var returns = [];
  for (i = 0; i < price.length; i++) {
    var r = (base - price[i])*100 / price[i];
    returns.push(r);
  }
  returns.pop();

  returns = returns.reverse();

  const max_val = Math.max(...returns);
  const min_val = Math.min(...returns);
  const max_index = returns.indexOf(max_val)+1;
  const min_index = returns.indexOf(min_val)+1;

  /* console.log(returns,max_val,min_val,max_index,min_index); */

  return [max_index, max_val, min_index, min_val];
}



  
var url = "https://query1.finance.yahoo.com/v8/finance/chart/IRCTC.NS?period1=1660726173&period2=1692262173&interval=1wk&events=history&includeAdjustedClose=true";
var add = "https://proxy.cors.sh/";
add = "https://corsproxy.io/?";
var final = add + url;
/* const response = fetch(final); */
/* console.log(response.json); */
async function logMovies(stock) {
  /*  var stock_name = document.getElementById("stock_name").value; */

  var stock_name = stock;

  var from_date = new Date(document.getElementById("from_date").value).getTime() / 1000;
  var to_date = new Date(document.getElementById("to_date").value).getTime() / 1000;
  var cors_proxy = "https://corsproxy.io/?";
  var api_url = "https://query1.finance.yahoo.com/v8/finance/chart/$stock_name$?period1=$from_date$&period2=$to_date$&interval=1wk&events=history&includeAdjustedClose=true";
  api_url = api_url.replace("$stock_name$", stock_name);
  api_url = api_url.replace("$from_date$", from_date);
  api_url = api_url.replace("$to_date$", to_date);
  var final_url = cors_proxy + api_url;
  /*  console.log(final_url); */
  const response = await fetch(final_url);
  const stock_price = await response.json();
  /*  console.log(stock_price); */
  /*   document.getElementById("result").innerText = JSON.stringify(stock_price); */

  var stock_open = stock_price.chart.result[0].indicators.quote[0].open;
  var stock_close = stock_price.chart.result[0].indicators.quote[0].close;

  var return_pattern = min_max_return(stock_close);
  
  /*  console.log(stock_open);
   console.log(stock_close);
    */
  var open1 = stock_open[0];
  var close1 = stock_close[stock_close.length - 2];

  var open2 = close1;
  var close2 = stock_close[stock_close.length - 1];

  // var magnitude = ((close1 - open1) / open1) * ((close2 - open2) / open2);

  var magnitude = return_pattern[1]*return_pattern[2]*return_pattern[3]/return_pattern[0] ;

  var normal_return = (close2 - open1)*100/open1;

  var pattern = 'Other';

  if ((close1 - open1) < 0 && (close2 - open2) > 0) {
    pattern = 'Low then High';
  }

  /* console.log(open1, close1, open2, close2, magnitude); */

 
  document.getElementById("result").innerHTML += '<tr><td><a target=\'_blank\' href=\'https://google.com/search?q='+ stock_name.replace('.NS','') +'+stock+price\' >' + stock_name + '</a></td><td>' + pattern + '</td><td>' + normal_return + '</td><td>'+return_pattern[0]+'</td><td>'+return_pattern[1]+'</td><td>'+return_pattern[2]+'</td><td>'+return_pattern[3]+'</td><td>' + magnitude + '</td></tr>';
  
  
  /*   console.log(from_date);
    console.log(to_date); */
}

function all_stocks(arr) {
  var s = arr;

  for (i = 0; i < s.length; i++) {
    logMovies(s[i]);
  }


}




var stocks = ['360ONE',
'3MINDIA',
'AARTIDRUGS',
'AARTIIND',
'AAVAS',
'ABB',
'ABBOTINDIA',
'ABCAPITAL',
'ABFRL',
'ABSLAMC',
'ACC',
'ACE',
'ADANIENT',
'ADANIGREEN',
'ADANIPORTS',
'ADANIPOWER',
'ADANITRANS',
'AEGISLOG',
'AETHER',
'AFFLE',
'AGI',
'AIAENG',
'AIIL',
'AJANTPHARM',
'AKZOINDIA',
'ALKEM',
'ALKYLAMINE',
'ALLCARGO',
'ALOKTEXT',
'AMARAJABAT',
'AMBER',
'AMBUJACEM',
'AMIORG',
'ANANTRAJ',
'ANGELONE',
'ANURAS',
'APARINDS',
'APCOTEXIND',
'APLAPOLLO',
'APLLTD',
'APOLLOHOSP',
'APOLLOTYRE',
'APTUS',
'ARVIND',
'ARVINDFASN',
'ASAHIINDIA',
'ASHOKA',
'ASHOKLEY',
'ASIANPAINT',
'ASTEC',
'ASTERDM',
'ASTRAL',
'ASTRAMICRO',
'ASTRAZEN',
'ATGL',
'ATUL',
'AUBANK',
'AUROPHARMA',
'AVANTI',
'AWL',
'AXISBANK',
'BAJAJ-AUTO',
'BAJAJCON',
'BAJAJELEC',
'BAJAJFINSV',
'BAJAJHIND',
'BAJAJHLDNG',
'BAJFINANCE',
'BALAMINES',
'BALKRISIND',
'BALRAMCHIN',
'BANDHANBNK',
'BANKBARODA',
'BANKINDIA',
'BARBEQUE',
'BASF',
'BATAINDIA',
'BAYERCROP',
'BBL',
'BBTC',
'BDL',
'BECTORFOOD',
'BEL',
'BEML',
'BENGALASM',
'BERGEPAINT',
'BHARATFORG',
'BHARTIARTL',
'BHEL',
'BIOCON',
'BIRLACORPN',
'BLS',
'BLUEDART',
'BLUESTARCO',
'BOMDYEING',
'BOROLTD',
'BORORENEW',
'BOSCHLTD',
'BPCL',
'BRIGADE',
'BRITANNIA',
'BSLSENETFG',
'BSOFT',
'CAMLINFINE',
'CAMPUS',
'CAMS',
'CANBK',
'CANFINHOME',
'CAPPL',
'CARBORUNIV',
'CARERATING',
'CARTRADE',
'CARYSIL',
'CASTROLIND',
'CCL',
'CEATLTD',
'CENTRALBK',
'CENTURYPLY',
'CENTURYTEX',
'CERA',
'CESC',
'CGCL',
'CGPOWER',
'CHALET',
'CHAMBLFERT',
'CHEMPLASTS',
'CHENNPETRO',
'CHOICEIN',
'CHOLAFIN',
'CHOLAHLDNG',
'CIEINDIA',
'CIGNITI',
'CIPLA',
'CLEAN',
'CMSINFO',
'COALINDIA',
'COCHINSHIP',
'COFFEEDAY',
'COFORGE',
'COLPAL',
'CONCOR',
'CONFIPET',
'COROMANDEL',
'COSMOFIRST',
'CPSEETF',
'CRAFTSMAN',
'CREDITACC',
'CRESSAN',
'CRISIL',
'CROMPTON',
'CSBBANK',
'CUB',
'CUMMINSIND',
'CYIENT',
'DAAWAT',
'DABUR',
'DALBHARAT',
'DATAPATTNS',
'DBL',
'DBREALTY',
'DCBBANK',
'DCMSHRIRAM',
'DCW',
'DEEPAKFERT',
'DEEPAKNI',
'DELHIVERY',
'DELTACORP',
'DEVYANI',
'DHAMPURSUG',
'DISHTV',
'DIVISLAB',
'DIXON',
'DLF',
'DMART',
'DRREDDY',
'DWARKESH',
'EASEMYTRIP',
'ECLERX',
'EDELWEISS',
'EICHERMOT',
'EIDPARRY',
'EIHOTEL',
'EKI',
'ELECON',
'ELECTCAST',
'ELGIEQUIP',
'EMAMILTD',
'ENDURANCE',
'ENGINERSIN',
'EPL',
'EQUITASBNK',
'ERIS',
'ESABINDIA',
'ESCORTS',
'EUREKAFORBE',
'EVEREADY',
'EXIDEIND',
'FAIRCHEMOR',
'FCL',
'FDC',
'FEDERALBNK',
'FIEMIND',
'FINCABLES',
'FINEORG',
'FINOLEXIND',
'FLUOROCHEM',
'FORTIS',
'FSL',
'GABRIEL',
'GAEL',
'GAIL',
'GALAXYSURF',
'GARFIBRES',
'GATEWAY',
'GATI',
'GESHIP',
'GHCL',
'GICRE',
'GILLETTE',
'GLAND',
'GLAXO',
'GLENMARK',
'GLOBUSSPR',
'GMDCLTD',
'GMM',
'GMRINFRA',
'GNFC',
'GOCOLORS',
'GODFRYPHLP',
'GODREJAGRO',
'GODREJCP',
'GODREJIND',
'GODREJPROP',
'GOKEX',
'GPIL',
'GPPL',
'GRANULES',
'GRAPHITE',
'GRASIM',
'GRAVITA',
'GREAVESCOT',
'GREENPANEL',
'GRINDWELL',
'GRINFRA',
'GRNLAMIND',
'GRSE',
'GSFC',
'GSPL',
'GTLINFRA',
'GUJALKALI',
'GUJGAS',
'HAL',
'HAPPSTMNDS',
'HARSHA',
'HATSUN',
'HAVELLS',
'HAWKINCOOK',
'HBLPOWER',
'HCC',
'HCLTECH',
'HDFCAMC',
'HDFCBANK',
'HDFCLIFE',
'HDFCSENSEX',
'HEG',
'HEIDELBERG',
'HEMIPROP',
'HEROMOTOCO',
'HFCL',
'HGINFRA',
'HGS',
'HIKAL',
'HIL',
'HINDALCO',
'HINDCOPPER',
'HINDOILEXP',
'HINDPETRO',
'HINDUNILVR',
'HINDWAREAP',
'HINDZINC',
'HLEGLAS',
'HNDFDS',
'HOMEFIRST',
'HONAUT',
'HSCL',
'HUDCO',
'IBREALEST',
'IBULHSGFIN',
'ICICI500',
'ICICIB22',
'ICICIBANK',
'ICICIGI',
'ICICIPRULI',
'ICICISENSX',
'ICIL',
'ICRA',
'IDBI',
'IDEA',
'IDFC',
'IDFCFIRSTB',
'IDFSENSEXE',
'IEX',
'IFBIND',
'IFCI',
'IGL',
'IIFL',
'INDHOTEL',
'INDIACEM',
'INDIAGLYCO',
'INDIAMART',
'INDIANB',
'INDIGO',
'INDIGOPNTS',
'INDOCO',
'INDUSINDBK',
'INDUSTOWER',
'INFIBEAM',
'INFY',
'INGERRAND',
'INOXWIND',
'INTELLECT',
'IOB',
'IOC',
'IOLCP',
'IONEXCHANG',
'IPCALAB',
'IRB',
'IRCON',
'IRCTC',
'IRFC',
'ISEC',
'ISGEC',
'ITC',
'ITDCEM',
'ITI',
'J&KBANK',
'JAICORPLTD',
'JAMNAAUTO',
'JBCHEPHARM',
'JBMA',
'JCHAC',
'JINDALPOLY',
'JINDALSAW',
'JINDALSTEL',
'JISLJALEQS',
'JKCEMENT',
'JKIL',
'JKLAKSHMI',
'JKPAPER',
'JKTYRE',
'JMFINANCIL',
'JPASSOCIAT',
'JPPOWER',
'JSL',
'JSWENERGY',
'JSWSTEEL',
'JUBLFOOD',
'JUBLINGREA',
'JUBLPHARMA',
'JUSTDIAL',
'JYOTHYLAB',
'JYOTIRES',
'KAJARIACER',
'KALYANKJIL',
'KAMAHOLD',
'KANSAINER',
'KEC',
'KEI',
'KENNAMET',
'KIMS',
'KIOCL',
'KIRIINDUS',
'KIRLFER',
'KIRLOSENG',
'KIRLPNU',
'KNRCON',
'KOTAKBANK',
'KPIGREEN',
'KPIL',
'KPITTECH',
'KPRMILL',
'KRBL',
'KSB',
'KSCL',
'KTKBANK',
'KTKSENSEX',
'L&TFH',
'LALPATHLAB',
'LAOPALA',
'LATENTVIEW',
'LAURUSLABS',
'LAXMIMACH',
'LEMONTREE',
'LGBBROSLTD',
'LICHSGFIN',
'LICI',
'LICNETFSEN',
'LINDEINDIA',
'LLOYDSME',
'LODHA',
'LT',
'LTIM',
'LTTS',
'LUPIN',
'LXCHEM',
'M&M',
'M&MFIN',
'MAHABANK',
'MAHLIFE',
'MAHLOG',
'MAHSCOOTER',
'MAHSEAMLES',
'MANAPPURAM',
'MANYAVAR',
'MAPMYINDIA',
'MARICO',
'MARKSANS',
'MARUTI',
'MASFIN',
'MASTEK',
'MAXHEALTH',
'MAZDOCK',
'MCX',
'MEDPLUS',
'METROBRAND',
'METROPOLIS',
'MFL',
'MFSL',
'MGL',
'MHRIL',
'MIDHANI',
'MINDACORP',
'MIRZAINT',
'MMTC',
'MOIL',
'MOL',
'MOLDTKPAC',
'MOREPENLAB',
'MOTHERSON',
'MOTILALOFS',
'MPHASIS',
'MRF',
'MRPL',
'MSTC',
'MSUMI',
'MTARTECH',
'MTNL',
'MUTHOOTFIN',
'NAM-INDIA',
'NATCOPHARM',
'NATIONALUM',
'NAUKRI',
'NAVA',
'NAVINFLUOR',
'NAVNETEDUL',
'NAZARA',
'NBCC',
'NCC',
'NDTV',
'NELCO',
'NEOGEN',
'NESCO',
'NESTLEIND',
'NETWORK18',
'NEULANDLAB',
'NEWGEN',
'NFL',
'NH',
'NHPC',
'NIACL',
'NIITLTD',
'NLCINDIA',
'NMDC',
'NOCIL',
'NTPC',
'NUVOCO',
'NYKAA',
'OBEROIRLTY',
'OFSS',
'OIL',
'OLECTRA',
'ONGC',
'ORIENTCEM',
'ORIENTELEC',
'PAGEIND',
'PAISALO',
'PARADEEP',
'PARAS',
'PAUSHAKLTD',
'PAYTM',
'PCBL',
'PEL',
'PERSISTENT',
'PETRONET',
'PFC',
'PFIZER',
'PGHH',
'PGHL',
'PHOENIXLTD',
'PIDILITIND',
'PIIND',
'PNB',
'PNBHOUSING',
'PNCINFRA',
'POLICYBZR',
'POLYCAB',
'POLYMED',
'POLYPLEX',
'POONAWALLA',
'POWERGRID',
'POWERINDIA',
'POWERMECH',
'PRAJIND',
'PRESTIGE',
'PRICOLLTD',
'PRIMO',
'PRINCEPIPE',
'PRIVISCL',
'PRSMJOHNSN',
'PSPPROJECT',
'PTC',
'PTCIL',
'PVRINOX',
'QUESS',
'RADICO',
'RAILTEL',
'RAIN',
'RAINBOW',
'RAJESHEXPO',
'RAJGLOWIR',
'RALLIS',
'RAMCOCEM',
'RATEGAIN',
'RATNAMANI',
'RAYMOND',
'RBA',
'RBLBANK',
'RCF',
'RECLTD',
'REDINGTON',
'RELAXO',
'RELIANCE',
'RELIGARE',
'RENUKA',
'REPCOHOME',
'RHIM',
'RIIL',
'RITES',
'RKFORGE',
'ROLEXRINGS',
'ROSSARI',
'ROUTE',
'RPOWER',
'RTNINDIA',
'RTNPOWER',
'RVNL',
'SAFARIND',
'SAIL',
'SANDUMA',
'SANOFI',
'SANSERA',
'SAPPHIRE',
'SAREGAMA',
'SBICARD',
'SBILIFE',
'SBIN',
'SBISENSEX',
'SCHAEFFLER',
'SCHNEIDER',
'SCI',
'SENSEXBEES',
'SEQUENT',
'SETFBSE100',
'SETFSN50',
'SFL',
'SHARDACROP',
'SHAREINDIA',
'SHBCLQ',
'SHILPAMED',
'SHOPERSTOP',
'SHREECEM',
'SHRIRAMFIN',
'SHYAMMETL',
'SIEMENS',
'SIS',
'SJVN',
'SKFINDIA',
'SNXT50BEES',
'SOBHA',
'SOLARINDS',
'SONACOMS',
'SONATSOFTW',
'SOUTHBANK',
'SPARC',
'SPLPETRO',
'SRF',
'STAR',
'STARCEMENT',
'STARHEALTH',
'STLTECH',
'STOVEKRAFT',
'STYLAMIND',
'SUBEX',
'SUDARSCHEM',
'SUMICHEM',
'SUNDRMFAST',
'SUNPHARMA',
'SUNTECK',
'SUNTV',
'SUPRAJIT',
'SUPREMEIND',
'SURYAROSNI',
'SUVENPHAR',
'SUZLON',
'SWANENERGY',
'SYMPHONY',
'SYNGENE',
'SYRMA',
'TANLA',
'TARSONS',
'TATACHEM',
'TATACOFFEE',
'TATACOMM',
'TATACONSUM',
'TATAELXSI',
'TATAINVEST',
'TATAMETALI',
'TATAMOTORS',
'TATAMTRDVR',
'TATAPOWER',
'TATASTEEL',
'TCI',
'TCIEXP',
'TCNSBRANDS',
'TCS',
'TDPOWERSYS',
'TEAMLEASE',
'TECHM',
'TECHNOE',
'TEJASNET',
'TEXRAIL',
'TGVSL',
'THERMAX',
'THYROCARE',
'TIINDIA',
'TIMETECHNO',
'TIMKEN',
'TINPLATE',
'TIRUMALCHM',
'TITAGARH',
'TITAN',
'TNPL',
'TORNTPHARM',
'TORNTPOWER',
'TRENT',
'TRIDENT',
'TRITURBINE',
'TRIVENI',
'TTKPRESTIG',
'TTML',
'TV18BRDCST',
'TVSHLTD',
'TVSMOTOR',
'TVSSRICHAK',
'UBL',
'UCOBANK',
'UFLEX',
'UJJIVAN',
'UJJIVANSFB',
'ULTRACEMCO',
'UNICHEMLAB',
'UNIONBANK',
'UNITDSPR',
'UNOMINDA',
'UPL',
'USHAMART',
'UTIAMC',
'UTISENSETF',
'UTISXN50',
'VAIBHAVGBL',
'VAKRANGEE',
'VALIANTORG',
'VARROC',
'VBL',
'VEDL',
'VENKYS',
'VESUVIUS',
'VGUARD',
'VIJAYA',
'VINATIORGA',
'VIPIND',
'VMART',
'VOLTAMP',
'VOLTAS',
'VRLLOG',
'VSTIND',
'VTL',
'WABAG',
'WARDINMOBI',
'WELCORP',
'WELENT',
'WELSPUNIND',
'WESTLIFE',
'WHIRLPOOL',
'WIPRO',
'WOCKPHARMA',
'WSTCSTPAPR',
'YESBANK',
'ZEEL',
'ZENSARTECH',
'ZFCVINDIA',
'ZOMATO',
'ZYDUSLIFE',
'ZYDUSWELL'

];



/* logMovies(final); */

</script>

<script src="https://cdn.jsdelivr.net/gh/tofsjonas/sortable@latest/sortable.min.js"></script>

</body>
</html>
